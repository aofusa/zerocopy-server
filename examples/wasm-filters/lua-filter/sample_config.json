{
	"script": "-- Sample Lua Filter for veil-proxy\n-- This script adds headers and logs requests\n\nfunction on_request()\n    -- Log the request\n    local path = veil.get_path()\n    local method = veil.get_method()\n    veil.log('info', 'Request: ' .. method .. ' ' .. path)\n    \n    -- Add custom headers\n    veil.set_request_header('X-Lua-Filter', 'true')\n    veil.set_request_header('X-Lua-Version', '5.4-custom')\n    \n    -- Block admin access\n    if string.find(path, '/admin') then\n        local auth = veil.get_request_header('Authorization')\n        if auth == nil then\n            veil.log('warn', 'Blocked unauthorized admin access')\n            veil.send_local_response(403, 'Forbidden: Authorization required')\n            return 'stop'\n        end\n    end\n    \n    return 'continue'\nend\n\nfunction on_response()\n    -- Add response headers\n    veil.set_response_header('X-Processed-By', 'Lua-Filter')\n    veil.set_response_header('X-Filter-Time', tostring(os.time and os.time() or 0))\n    \n    return 'continue'\nend",
	"debug": true
}